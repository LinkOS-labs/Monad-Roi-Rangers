<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mint Monad Roi Rangers</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.12.0/dist/ethers.umd.min.js"></script>
</head>
<body>
<div class="page-wrapper">

  <header class="navbar">
    <div class="nav-left">
      <div class="logo-dot"></div>
      <div>
        <div class="nav-title">Monad Roi Rangers</div>
        <div class="nav-sub">Mint</div>
      </div>
    </div>
    <nav class="nav-links">
      <a href="index.html">Home</a>
      <a href="mint.html">Mint</a>
      <a href="about.html">About</a>
    </nav>
  </header>

  <main>
    <section class="section">
      <h2 class="section-title">Mint Monad Roi Rangers</h2>
      <p class="section-sub">
        Mint price: <strong>5 MONAD</strong>
      </p>

      <div id="supply" class="supply" style="text-align:center;margin-bottom:18px;">
        Minted: ? / ?
      </div>

      <div class="mint-card-outer">
        <div class="mint-card">
          <div class="mint-label">Quantity</div>
          <input type="number" id="qty" class="mint-input" min="1" max="20" value="1">

          <div style="margin-top:18px;">
            <button id="connectBtn" class="btn-primary" style="width:100%;margin-bottom:8px;">
              Connect Wallet
            </button>
            <button id="mintBtn" class="btn-outline" style="width:100%;" disabled>
              Mint
            </button>
          </div>

          <div id="status" class="status" style="margin-top:14px;">
            Status: Idle
          </div>
        </div>
      </div>

      <div class="opensea-box">
        <a href="https://opensea.io/collection/monad-roi-rangers" target="_blank">
          https://opensea.io/collection/monad-roi-rangers
        </a>
      </div>
    </section>
  </main>

  <footer class="footer">
    Mint live on Monad · Contract:
    <a href="https://monadscan.com/address/0xF81737682eBD3B51F44c4321a67305F90B73D622"
       target="_blank" style="color:var(--accent);text-decoration:none;">
      0xF817...D622
    </a>
  </footer>

</div>

<script>
const CONTRACT_ADDRESS = "0xF81737682eBD3B51F44c4321a67305F90B73D622";
const RPC_URL = "https://rpc.monad.xyz";

const ABI = [
  "function mint(uint256 quantity) external payable"
];

function log(t){ document.getElementById("status").textContent = t; }

function getAnyProvider(){
  if(window.ethereum && Array.isArray(window.ethereum.providers)){
    const p = window.ethereum.providers;
    return p.find(x=>x.isMetaMask) || p.find(x=>x.isPhantom) || p[0];
  }
  if(window.phantom && window.phantom.ethereum) return window.phantom.ethereum;
  if(window.ethereum) return window.ethereum;
  return null;
}

let provider, signer, contract;

document.getElementById("connectBtn").onclick = async() => {
  try{
    const injected = getAnyProvider();
    const accounts = await injected.request({method:"eth_requestAccounts"});
    provider = new ethers.BrowserProvider(injected);
    signer = await provider.getSigner();
    contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, signer);
    log("Connected");
    document.getElementById("mintBtn").disabled = false;
  }catch(e){ log(e.message); }
};

document.getElementById("mintBtn").onclick = async() => {
  try{
    const qty = parseInt(document.getElementById("qty").value);
    const price = ethers.parseEther("5");
    const total = price * BigInt(qty);
    const tx = await contract.mint(qty,{value:total,gasLimit:250000n*BigInt(qty)});
    log("Waiting…" + tx.hash);
    const r = await tx.wait();
    log("Minted!\n" + r.hash);
  }catch(e){ log(e.reason||e.message); }
};
</script>

</body>
</html>


